const RestClient = require('./lib/rest_client').RestClient;
const subscription = require('./lib/subscription');

const SUBSCRIPTIONAPI_API_VERSION = 'V1';

module.exports.SubscriptionApiClient = function (options) {
  let instance = {
    addMethods (key, module) {
      let client = RestClient(options);
      if (module) {
        if (this[key])
          this[key] = Object.assign(this[key], module(client));
        else
          this[key] = module(client);
      }
    }
  };

  options.version = SUBSCRIPTIONAPI_API_VERSION;

  let client = RestClient(options);

  instance.subscription = subscription(client);

  return instance;
};
